<!DOCTYPE html>
<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
		<title>SeaMail Webb App</title>

    <script>
      window.onload = function(){


            //For loop to iterate through gmails
  					for (var i=0; i<geemails.length; i++){
						
              //sender
            var senderBox = document.createElement('div');
  						senderBox.className = 'name';
              senderBox.innerHTML = geemails[i].sender;
  						Inbox.appendChild(senderBox)
  					

  					
            //date
  						var dateBox = document.createElement('div')
  						dateBox.className = 'date';
  						dateBox.innerHTML = geemails[i].date;
  						Inbox.appendChild(dateBox)
  					


            //subject
  						var subjectBox = document.createElement('div');
  						subjectBox.className= 'subject';
  						subjectBox.innerHTML = geemails[i].subject;
              subjectBox.addEventListener('click', showBody);
  						Inbox.appendChild(subjectBox);
  					
					

            //body
  					var bodyBox = document.createElement('div');
  					bodyBox.className = 'body';
  					bodyBox.innerHTML = geemails[i].body;
  					subjectBox.appendChild(bodyBox);
            }


            //function to hide/show body here. 
            function showBody(){
              var bodyMessage = this.querySelectorAll('.body')[0];
              if(bodyMessage.style.display === 'block'){
                bodyMessage.style.display = 'none';
              }
              else{
                bodyMessage.style.display = 'block';
              }
              }

               //interval for new emails
               //append message data to Inbox div

                      var writeEmail = setInterval(writeNew, 2000);

                function writeNew () { 

                  var freshEmail =  getNewMessage();

                   var newEmailSender = document.createElement('div');
                       newEmailSender.className = 'freshSender';
                       newEmailSender.innerHTML = freshEmail.sender;
                       Inbox.appendChild(newEmailSender);

                   var newEmailDate = document.createElement('div');
                        newEmailDate.className = 'freshDate';
                        newEmailDate.innerHTML = freshEmail.date;
                        Inbox.appendChild(newEmailDate);

                    var newEmailSubject = document.createElement('div');
                        newEmailSubject.className = 'freshSubject';
                        newEmailSubject.innerHTML = freshEmail.subject;
                        newEmailSubject.addEventListener('click', showNewBody);
                        Inbox.appendChild(newEmailSubject);

                    var newEmailBody = document.createElement('div');
                        newEmailBody.className = 'freshBody';
                        newEmailBody.innerHTML = freshEmail.body;
                        newEmailSubject.appendChild(newEmailBody);


                      document.getElementById('ret').innerHTML = geemails.length++






                                                }

                        
                        function showNewBody(){
              var newEmailBodyMessage = this.querySelectorAll('.freshBody')[0];
              if(newEmailBodyMessage.style.display === 'block'){
                newEmailBodyMessage.style.display = 'none';
              }
              else{
                newEmailBodyMessage.style.display = 'block';
              }
              }

                        
                            
// working on Inbox counter 
                                      //returns "undefined in MailCount div element."
                        var inBoxCount = document.createElement('div');
                        inBoxCount.id = "ret"
                        inBoxCount.innerHTML = geemails.length = 10;
                        MailCount.appendChild(inBoxCount);

                        //var updatingCount = 
                      


                     

                                        

                         







                              //var inBoxCounter = ;
                              //inBoxCounter.createElement = ('box');
                              //inBoxCounter.className = 'counter';
                              //inboxCounter.innerHTML = 10 + freshEmail.body;
                              //counter.appendChild(inBoxCounter);
                            

                
        //close windows.onload - DON'T DELETE!
        }
  </script>
	</head>
	

  <body>
		<div class="container" id='main'>
     			

      <div class="header">
        <h1>Welcome To Seamail!</h1></div>
			<p class="intro">A not-so-sleak way to check your email, and see what new messages you have</p><br>
      <div id='MailCount'>Message Count:</div></div>

			<h2>Check You're Inbox Here:</h2>    

            <div id='newInbox'></div>
            <div id='Inbox'></div>
	
  </div>
	</body>
  </html>